{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acost\\\\Desktop\\\\BarChat\\\\client\\\\src\\\\components\\\\MainPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport useGeoLocation from './useGeoLocation';\nimport { Link } from 'react-router-dom';\nimport profileImage from '../images/profile.png';\nimport infoLogo from '../images/information.png';\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MainPage = props => {\n  _s();\n\n  const location = useGeoLocation();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const userToken = Cookies.get('userToken');\n\n    if (userToken) {\n      const user = jwtDecode(userToken);\n      setUser(user);\n    }\n  }, []);\n\n  const handleLogout = () => {\n    axios.post(`http://localhost:8000/api/users/logout`, {}, {\n      withCredentials: true\n    }).then(res => {\n      Cookies.remove('userToken');\n      setUser('null');\n    }).catch(err => console.log('Logout Error', err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/profile/`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: profileImage,\n          alt: \"profile pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/app/info\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: infoLogo,\n          alt: \"info logo pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this), user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome back \", user.username, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No one is here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MainPage, \"NqZi8lFSh2fqNTNWfJUv3T1tJr8=\", false, function () {\n  return [useGeoLocation];\n});\n\n_c = MainPage;\nexport default MainPage; //Image source: <a href=\"https://www.flaticon.com/free-icons/info\" title=\"info icons\">Info icons created by th studio - Flaticon</a>\n\nvar _c;\n\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useEffect","useState","useGeoLocation","Link","profileImage","infoLogo","Cookies","jwtDecode","axios","MainPage","props","location","user","setUser","userToken","get","handleLogout","post","withCredentials","then","res","remove","catch","err","console","log","username"],"sources":["C:/Users/acost/Desktop/BarChat/client/src/components/MainPage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport useGeoLocation from './useGeoLocation';\r\nimport {Link} from 'react-router-dom';\r\nimport profileImage from '../images/profile.png';\r\nimport infoLogo from '../images/information.png';\r\nimport Cookies from 'js-cookie';\r\nimport jwtDecode from 'jwt-decode';\r\nimport axios from 'axios';\r\n\r\nconst MainPage = (props) => {\r\n  \r\n  const location = useGeoLocation();\r\n\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect( () => {\r\n    const userToken = Cookies.get('userToken');\r\n    if (userToken) {\r\n      const user = jwtDecode(userToken);\r\n      setUser(user);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    axios.post(`http://localhost:8000/api/users/logout`, {}, {withCredentials: true})\r\n      .then( (res) => {\r\n        Cookies.remove('userToken');\r\n        setUser('null')\r\n      })\r\n      .catch(err=>console.log('Logout Error', err));\r\n  }\r\n\r\n  return (\r\n    <>\r\n{/*     \r\n    { \r\n      location.loaded ? JSON.stringify(location) : \"Location data not available yet\"\r\n    } */}\r\n\r\n    <div>\r\n    <Link to={`/profile/`}>\r\n      <img src={profileImage} alt=\"profile pic\" />\r\n    </Link>\r\n    <label>Profile</label>\r\n    </div>\r\n\r\n    <div>\r\n    <a href=\"/app/info\">\r\n      <img src={infoLogo} alt=\"info logo pic\" />\r\n    </a>\r\n    <label>Information</label>\r\n    </div>\r\n\r\n\r\n    {user ? <div>\r\n      <p>Welcome back {user.username} </p>\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n    : <div>\r\n      <p>No one is here</p>\r\n    </div>}\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default MainPage;\r\n\r\n\r\n\r\n//Image source: <a href=\"https://www.flaticon.com/free-icons/info\" title=\"info icons\">Info icons created by th studio - Flaticon</a>"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;EAAA;;EAE1B,MAAMC,QAAQ,GAAGT,cAAc,EAA/B;EAEA,MAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,IAAD,CAAhC;EAEAD,SAAS,CAAE,MAAM;IACf,MAAMc,SAAS,GAAGR,OAAO,CAACS,GAAR,CAAY,WAAZ,CAAlB;;IACA,IAAID,SAAJ,EAAe;MACb,MAAMF,IAAI,GAAGL,SAAS,CAACO,SAAD,CAAtB;MACAD,OAAO,CAACD,IAAD,CAAP;IACD;EACF,CANQ,EAMN,EANM,CAAT;;EAQA,MAAMI,YAAY,GAAG,MAAM;IACzBR,KAAK,CAACS,IAAN,CAAY,wCAAZ,EAAqD,EAArD,EAAyD;MAACC,eAAe,EAAE;IAAlB,CAAzD,EACGC,IADH,CACUC,GAAD,IAAS;MACdd,OAAO,CAACe,MAAR,CAAe,WAAf;MACAR,OAAO,CAAC,MAAD,CAAP;IACD,CAJH,EAKGS,KALH,CAKSC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,GAA5B,CALd;EAMD,CAPD;;EASA,oBACE;IAAA,wBAMA;MAAA,wBACA,QAAC,IAAD;QAAM,EAAE,EAAG,WAAX;QAAA,uBACE;UAAK,GAAG,EAAEnB,YAAV;UAAwB,GAAG,EAAC;QAA5B;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADA,eAIA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJA;IAAA;MAAA;MAAA;MAAA;IAAA,QANA,eAaA;MAAA,wBACA;QAAG,IAAI,EAAC,WAAR;QAAA,uBACE;UAAK,GAAG,EAAEC,QAAV;UAAoB,GAAG,EAAC;QAAxB;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADA,eAIA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJA;IAAA;MAAA;MAAA;MAAA;IAAA,QAbA,EAqBCO,IAAI,gBAAG;MAAA,wBACN;QAAA,4BAAiBA,IAAI,CAACc,QAAtB;MAAA;QAAA;QAAA;QAAA;MAAA,QADM,eAEN;QAAQ,OAAO,EAAEV,YAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFM;IAAA;MAAA;MAAA;MAAA;IAAA,QAAH,gBAIH;MAAA,uBACA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADA;MAAA;MAAA;MAAA;IAAA,QAzBF;EAAA,gBADF;AAgCD,CAvDD;;GAAMP,Q;UAEaP,c;;;KAFbO,Q;AAyDN,eAAeA,QAAf,C,CAIA"},"metadata":{},"sourceType":"module"}