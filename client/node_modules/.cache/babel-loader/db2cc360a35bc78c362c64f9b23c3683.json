{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acost\\\\Desktop\\\\BarChat\\\\client\\\\src\\\\components\\\\MainPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport useGeoLocation from './useGeoLocation';\nimport { Link, useNavigate } from 'react-router-dom';\nimport profileImage from '../images/profile.png';\nimport infoLogo from '../images/information.png';\nimport messageImage from '../images/message.png';\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport axios from 'axios';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MainPage = props => {\n  _s();\n\n  const location = useGeoLocation();\n  const [user, setUser] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    const userToken = Cookies.get('userToken');\n\n    if (userToken) {\n      const user = jwtDecode(userToken);\n      setUser(user);\n    }\n  }, []);\n\n  const handleLogout = () => {\n    axios.post(`http://localhost:8000/api/users/logout`, {}, {\n      withCredentials: true\n    }).then(res => {\n      Cookies.remove('userToken');\n      setUser('null');\n      navigate('/');\n    }).catch(err => console.log('Logout Error', err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      id: \"myHover\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/profile/${user._id}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: profileImage,\n          alt: \"profile pic\",\n          className: \"image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"hide\",\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/app/info\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: infoLogo,\n          alt: \"info logo pic\",\n          className: \"image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/barchat/${user._id}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: messageImage,\n          alt: \"message pic\",\n          className: \"image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Chat \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this), user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome back \", user.name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No one is here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MainPage, \"1NAHdtpPuCImiR/APwkRIFAyWuk=\", false, function () {\n  return [useGeoLocation, useNavigate];\n});\n\n_c = MainPage;\nexport default MainPage; //Image source: <a href=\"https://www.flaticon.com/free-icons/info\" title=\"info icons\">Info icons created by th studio - Flaticon</a>\n\nvar _c;\n\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useEffect","useState","useGeoLocation","Link","useNavigate","profileImage","infoLogo","messageImage","Cookies","jwtDecode","axios","MainPage","props","location","user","setUser","navigate","userToken","get","handleLogout","post","withCredentials","then","res","remove","catch","err","console","log","_id","name"],"sources":["C:/Users/acost/Desktop/BarChat/client/src/components/MainPage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport useGeoLocation from './useGeoLocation';\r\nimport {Link, useNavigate} from 'react-router-dom';\r\nimport profileImage from '../images/profile.png';\r\nimport infoLogo from '../images/information.png';\r\nimport messageImage from '../images/message.png';\r\nimport Cookies from 'js-cookie';\r\nimport jwtDecode from 'jwt-decode';\r\nimport axios from 'axios';\r\nimport '../App.css';\r\n\r\nconst MainPage = (props) => {\r\n  \r\n  const location = useGeoLocation();\r\n\r\n  const [user, setUser] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect( () => {\r\n    const userToken = Cookies.get('userToken');\r\n    if (userToken) {\r\n      const user = jwtDecode(userToken);\r\n      setUser(user);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    axios.post(`http://localhost:8000/api/users/logout`, {}, {withCredentials: true})\r\n      .then( (res) => {\r\n        Cookies.remove('userToken');\r\n        setUser('null')\r\n        navigate('/')\r\n      })\r\n      .catch(err=>console.log('Logout Error', err));\r\n  }\r\n\r\n  return (\r\n    <>\r\n{/*     \r\n    { \r\n      location.loaded ? JSON.stringify(location) : \"Location data not available yet\"\r\n    } */}\r\n\r\n    <div className='div' id='myHover'>\r\n    <Link to={`/profile/${user._id}`}>\r\n      <img src={profileImage} alt=\"profile pic\" className=\"image\" />\r\n    </Link>\r\n    <label className='hide'>Profile</label>\r\n    </div>\r\n\r\n    <div className='div'>\r\n    <a href=\"/app/info\">\r\n      <img src={infoLogo} alt=\"info logo pic\" className=\"image\" />\r\n    </a>\r\n    <label>Information</label>\r\n    </div>\r\n\r\n    <div className='div'>\r\n    <Link to={`/barchat/${user._id}`}>\r\n      <img src={messageImage} alt=\"message pic\" className=\"image\" />\r\n    </Link>\r\n    <label>Chat </label>\r\n    </div>\r\n    \r\n\r\n    {user ? <div>\r\n      <p>Welcome back {user.name} </p>\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n    : <div>\r\n      <p>No one is here</p>\r\n    </div>}\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default MainPage;\r\n\r\n\r\n\r\n//Image source: <a href=\"https://www.flaticon.com/free-icons/info\" title=\"info icons\">Info icons created by th studio - Flaticon</a>"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAAQC,IAAR,EAAcC,WAAd,QAAgC,kBAAhC;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;;;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;EAAA;;EAE1B,MAAMC,QAAQ,GAAGX,cAAc,EAA/B;EAEA,MAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,EAAD,CAAhC;EAEA,MAAMe,QAAQ,GAAGZ,WAAW,EAA5B;EAEAJ,SAAS,CAAE,MAAM;IACf,MAAMiB,SAAS,GAAGT,OAAO,CAACU,GAAR,CAAY,WAAZ,CAAlB;;IACA,IAAID,SAAJ,EAAe;MACb,MAAMH,IAAI,GAAGL,SAAS,CAACQ,SAAD,CAAtB;MACAF,OAAO,CAACD,IAAD,CAAP;IACD;EACF,CANQ,EAMN,EANM,CAAT;;EAQA,MAAMK,YAAY,GAAG,MAAM;IACzBT,KAAK,CAACU,IAAN,CAAY,wCAAZ,EAAqD,EAArD,EAAyD;MAACC,eAAe,EAAE;IAAlB,CAAzD,EACGC,IADH,CACUC,GAAD,IAAS;MACdf,OAAO,CAACgB,MAAR,CAAe,WAAf;MACAT,OAAO,CAAC,MAAD,CAAP;MACAC,QAAQ,CAAC,GAAD,CAAR;IACD,CALH,EAMGS,KANH,CAMSC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,GAA5B,CANd;EAOD,CARD;;EAUA,oBACE;IAAA,wBAMA;MAAK,SAAS,EAAC,KAAf;MAAqB,EAAE,EAAC,SAAxB;MAAA,wBACA,QAAC,IAAD;QAAM,EAAE,EAAG,YAAWZ,IAAI,CAACe,GAAI,EAA/B;QAAA,uBACE;UAAK,GAAG,EAAExB,YAAV;UAAwB,GAAG,EAAC,aAA5B;UAA0C,SAAS,EAAC;QAApD;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADA,eAIA;QAAO,SAAS,EAAC,MAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJA;IAAA;MAAA;MAAA;MAAA;IAAA,QANA,eAaA;MAAK,SAAS,EAAC,KAAf;MAAA,wBACA;QAAG,IAAI,EAAC,WAAR;QAAA,uBACE;UAAK,GAAG,EAAEC,QAAV;UAAoB,GAAG,EAAC,eAAxB;UAAwC,SAAS,EAAC;QAAlD;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADA,eAIA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJA;IAAA;MAAA;MAAA;MAAA;IAAA,QAbA,eAoBA;MAAK,SAAS,EAAC,KAAf;MAAA,wBACA,QAAC,IAAD;QAAM,EAAE,EAAG,YAAWQ,IAAI,CAACe,GAAI,EAA/B;QAAA,uBACE;UAAK,GAAG,EAAEtB,YAAV;UAAwB,GAAG,EAAC,aAA5B;UAA0C,SAAS,EAAC;QAApD;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADA,eAIA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJA;IAAA;MAAA;MAAA;MAAA;IAAA,QApBA,EA4BCO,IAAI,gBAAG;MAAA,wBACN;QAAA,4BAAiBA,IAAI,CAACgB,IAAtB;MAAA;QAAA;QAAA;QAAA;MAAA,QADM,eAEN;QAAQ,OAAO,EAAEX,YAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFM;IAAA;MAAA;MAAA;MAAA;IAAA,QAAH,gBAIH;MAAA,uBACA;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADA;MAAA;MAAA;MAAA;IAAA,QAhCF;EAAA,gBADF;AAuCD,CAjED;;GAAMR,Q;UAEaT,c,EAIAE,W;;;KANbO,Q;AAmEN,eAAeA,QAAf,C,CAIA"},"metadata":{},"sourceType":"module"}